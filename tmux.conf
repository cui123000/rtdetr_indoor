# tmux配置文件 - 支持滚动、复制粘贴

# 基本设置
set -g default-terminal "screen-256color"
set -g history-limit 10000

# 启用鼠标支持 (包括滚动、复制粘贴、窗格调整)
set -g mouse on

# 设置前缀键为 Ctrl+A (更方便)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# 快速重载配置
bind r source-file ~/.tmux.conf \; display "配置已重载!"

# 窗格分割快捷键
bind | split-window -h  # 垂直分割
bind - split-window -v  # 水平分割

# 窗格切换 (Vim风格)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# 窗格大小调整
bind H resize-pane -L 5
bind J resize-pane -D 5
bind K resize-pane -U 5
bind L resize-pane -R 5

# 启用vi模式复制
setw -g mode-keys vi
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-selection-and-cancel
bind-key -T copy-mode-vi 'C-v' send -X rectangle-toggle

# 粘贴
bind p paste-buffer

# 状态栏配置
set -g status-bg colour235
set -g status-fg colour255
set -g status-left "#[fg=colour32][#S] "
set -g status-right "#[fg=colour32]%Y-%m-%d %H:%M "

# 窗口编号从1开始
set -g base-index 1
setw -g pane-base-index 1

# 自动重命名窗口
setw -g automatic-rename on

# 确保窗口索引连续
set -g renumber-windows on

# 使用说明:
# - 鼠标滚轮: 上下滚动历史记录
# - 鼠标选择: 直接选择文本
# - Ctrl+A + [ : 进入复制模式 (用方向键/Page Up/Page Down滚动)
# - 复制模式下: v开始选择, y复制, q退出
# - Ctrl+A + p : 粘贴
# - Ctrl+A + d : 分离会话
# - Ctrl+A + | : 垂直分割窗格
# - Ctrl+A + - : 水平分割窗格